{"version":3,"sources":["pages/palette/components/options/options.module.less","pages/palette/palette.module.less","pages/palette/components/drawBtns/drawBtns.module.less","App.module.less","model/context.js","pages/palette/components/drawBtns/drawBtns.jsx","pages/palette/components/options/options.jsx","pages/palette/palette.jsx","App.js","index.js"],"names":["module","exports","Context","createContext","initState","opacity","offsetX","offsetY","blur","shadowColor","lineWidth","fillStyle","strokeStyle","stopColor1","stopColor2","textInner","lineCap","setLineDash","lineJoin","picurl","btnType","drawType","reducer","state","action","type","changeValue","Provider","children","useReducer","dispatch","value","canvasBtns","webglBtns","DrawBtns","useContext","draw","canvas","document","getElementById","getContext","ctx","clearRect","width","height","globalAlpha","shadowOffsetX","shadowOffsetY","shadowBlur","beginPath","moveTo","lineTo","closePath","stroke","strokeRect","fillRect","arc","Math","PI","fill","i","cos","sin","gnt","createLinearGradient","addColorStop","gen","createRadialGradient","text","font","fillText","image","Image","src","onload","drawImage","image1","console","log","useEffect","className","styles","draw_btns_con","draw_btns_title","map","item","draw_btns_item","onClick","Options","onRangeChange","e","target","onBtnChange","options_con","options_clear","clear_btn","options_range","options_range_item","min","max","step","onChange","defaultValue","placeholder","onBlur","options_lineCap","Palette","palette_con","palette_left","palette_right","palette_disposition","palette_canvas","id","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.9d4ff9da.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"options_con\":\"options_options_con__1GWGm\",\"options_clear\":\"options_options_clear__2ju6U\",\"clear_btn\":\"options_clear_btn__yfze-\",\"options_range\":\"options_options_range__1ylN1\",\"options_range_item\":\"options_options_range_item__mpc_3\",\"options_lineCap\":\"options_options_lineCap__2ttYs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"palette_con\":\"palette_palette_con__2L2ii\",\"palette_left\":\"palette_palette_left__3mecC\",\"palette_right\":\"palette_palette_right__3KOU9\",\"palette_disposition\":\"palette_palette_disposition__14NUN\",\"palette_canvas\":\"palette_palette_canvas__3-84b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"draw_btns_con\":\"drawBtns_draw_btns_con__29MvV\",\"draw_btns_title\":\"drawBtns_draw_btns_title__2k6po\",\"draw_btns_item\":\"drawBtns_draw_btns_item__2Jht2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3kiB-\"};","import React, { useReducer, createContext } from \"react\";\r\n\r\n/**\r\n * 1. 创建全局的Context 使用context将跟组件包裹起来\r\n * 然后将根组件包裹起来，将state和dispatch派发下去\r\n * */ \r\nconst Context = createContext({});\r\nexport default Context;\r\n\r\n// 2. 创建全局的Reducer\r\nconst initState = {\r\n  opacity: 1.0  ,   //透明度\r\n  offsetX: 0,     //阴影水平方向偏移\r\n  offsetY: 0,     //阴影垂直方向偏移\r\n  blur: 0,        //阴影模糊范围\r\n  shadowColor:'#ccc', //阴影颜色\r\n  lineWidth: 1,  //线宽\r\n  fillStyle: 'red',   //填充样式\r\n  strokeStyle: '#ccc',     //描边样式\r\n  stopColor1: 'HotPink', //渐变颜色1\r\n  stopColor2: 'yellow',  //渐变颜色2\r\n  textInner: 'MY CANVAS',        //文本内容\r\n  lineCap: 'butt',   //线帽\r\n  setLineDash:[],\r\n  lineJoin: 'miter',   //线条连接处样式\r\n  picurl: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg3.doubanio.com%2Fview%2Fphoto%2Fl%2Fpublic%2Fp2460621164.jpg&refer=http%3A%2F%2Fimg3.doubanio.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1624254449&t=d397dfc100df7804add68a40573c165a',\r\n  btnType: '' ,  //绘制的图形\r\n  drawType: 'stroke'\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n   const type = action.type\r\n\r\n    switch (type) {\r\n      case 'drawType':\r\n        return { ...state, drawType: action.drawType };  \r\n      case type:\r\n        return { ...state, [type]: action.changeValue };\r\n  \r\n      default:\r\n        return state;\r\n    }\r\n};\r\n\r\n// 3. 将全局useReducer返回的state和dispatch传递给全局Context.Provider的value中\r\nexport const Provider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(reducer, initState);\r\n  \r\n    return (\r\n      <Context.Provider value={{ state, dispatch }}>{children}</Context.Provider>\r\n    );\r\n};\r\n\r\n","import { useContext, useEffect } from \"react\";\r\nimport styles from \"./drawBtns.module.less\";\r\nimport Context from \"../../../../model/context\";\r\nimport {linkWebGl} from '../../../../utils'\r\n\r\nconst canvasBtns = [\r\n  \"绘制直线\",\r\n  \"绘制矩形\",\r\n  \"绘制圆形\",\r\n  \"绘制三角形\",\r\n  \"绘制圆环\",\r\n  \"绘制扇形\",\r\n  \"绘制五角星\",\r\n  \"线性渐变\",\r\n  \"径向渐变\",\r\n  \"添加文本\",\r\n  \"绘制图片\",\r\n  \"图片裁切\",\r\n];\r\n\r\nconst webglBtns = ['绘制点','点击绘制点']\r\n\r\nfunction DrawBtns() {\r\n  const { state, dispatch } = useContext(Context);\r\n\r\n  const {\r\n    opacity,\r\n    picurl,\r\n    offsetX,\r\n    offsetY,\r\n    blur,\r\n    shadowColor,\r\n    lineWidth,\r\n    fillStyle,\r\n    strokeStyle,\r\n    stopColor1,\r\n    stopColor2,\r\n    textInner,\r\n    lineCap,\r\n    lineJoin,\r\n    setLineDash,\r\n    drawType\r\n  } = state;\r\n\r\n  const draw = (type) => {\r\n    //将上次的绘制类型存储起来\r\n    dispatch({\r\n      type: \"btnType\",\r\n      changeValue: type,\r\n    });\r\n\r\n    var canvas = document.getElementById(\"canvas\");\r\n    if (canvas.getContext) {\r\n      var ctx = canvas.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      ctx.globalAlpha = opacity;\r\n      ctx.lineWidth = lineWidth\r\n      ctx.lineCap = lineCap\r\n      ctx.lineJoin = lineJoin\r\n      ctx.shadowColor = shadowColor\r\n      ctx.shadowOffsetX = offsetX\r\n      ctx.shadowOffsetY = offsetY\r\n      ctx.shadowBlur = blur\r\n      ctx.setLineDash(setLineDash);\r\n      switch (type) {\r\n        case \"绘制直线\":\r\n          ctx.beginPath();\r\n          ctx.moveTo(60, 60);\r\n          ctx.lineTo(160, 60);\r\n          ctx.strokeStyle = strokeStyle\r\n          ctx.closePath();\r\n          ctx.stroke();\r\n          break;\r\n        case \"绘制矩形\":\r\n          if (drawType === 'stroke') {\r\n            ctx.strokeStyle = strokeStyle\r\n            ctx.strokeRect(60, 60, 100, 100)\r\n          } else {\r\n            ctx.fillStyle = fillStyle\r\n            ctx.fillRect(60, 60, 100, 100)\r\n          }\r\n          break;\r\n        case \"绘制圆形\":\r\n          ctx.beginPath();\r\n          ctx.arc(80, 80, 60, 0, (Math.PI * 360) / 180, false);\r\n          if (drawType === 'stroke') {\r\n            ctx.strokeStyle = strokeStyle\r\n            ctx.closePath();\r\n            ctx.stroke()\r\n          } else {\r\n            ctx.fillStyle = fillStyle\r\n            ctx.closePath();\r\n            ctx.fill()\r\n          }\r\n          break;\r\n        case \"绘制三角形\":\r\n          ctx.beginPath();\r\n          ctx.moveTo(100, 20);\r\n          ctx.lineTo(160, 100);\r\n          ctx.lineTo(40, 100);\r\n          ctx.closePath();\r\n          if (drawType === 'stroke') {\r\n            ctx.strokeStyle = strokeStyle\r\n            ctx.stroke()\r\n          } else {\r\n            ctx.fillStyle = fillStyle\r\n            ctx.fill()\r\n          }\r\n          break;\r\n        case \"绘制圆环\":\r\n          ctx.beginPath();\r\n          ctx.fillStyle = fillStyle;\r\n          ctx.arc(100, 100, 80, 0, (Math.PI * 360) / 180, false);\r\n          ctx.fill();\r\n          ctx.beginPath();\r\n          ctx.fillStyle = \"#fff\";\r\n          ctx.arc(100, 100, 50, 0, (Math.PI * 360) / 180, false);\r\n          ctx.fill();\r\n          break;\r\n        case \"绘制扇形\":\r\n          ctx.beginPath();\r\n          ctx.fillStyle = fillStyle;\r\n          ctx.moveTo(100, 100);\r\n          ctx.arc(\r\n            100,\r\n            100,\r\n            50,\r\n            -(Math.PI * 30) / 180,\r\n            -(Math.PI * 150) / 180,\r\n            true\r\n          );\r\n          ctx.fill();\r\n          break;\r\n        case \"绘制五角星\":\r\n          ctx.beginPath();\r\n          var horn = 5; // 画5个角\r\n          var angle = 360 / horn; // 五个角的度数\r\n          // 两个圆的半径\r\n          var R = 100;\r\n          var r = 50;\r\n          // 坐标\r\n          var x = 100;\r\n          var y = 100;\r\n          for (var i = 0; i < horn; i++) {\r\n            // 角度转弧度：角度/180*Math.PI\r\n            // 外圆顶点坐标\r\n            ctx.lineTo(\r\n              Math.cos(((18 + i * angle) / 180) * Math.PI) * R + x,\r\n              -Math.sin(((18 + i * angle) / 180) * Math.PI) * R + y\r\n            );\r\n            // 內圆顶点坐标\r\n            ctx.lineTo(\r\n              Math.cos(((54 + i * angle) / 180) * Math.PI) * r + x,\r\n              -Math.sin(((54 + i * angle) / 180) * Math.PI) * r + y\r\n            );\r\n          }\r\n          // closePath：关闭路径，将路径的终点与起点相连\r\n          ctx.closePath();\r\n          if (drawType === 'stroke') {\r\n            ctx.strokeStyle = strokeStyle\r\n            ctx.stroke()\r\n          } else {\r\n            ctx.fillStyle = fillStyle\r\n            ctx.fill()\r\n          }\r\n          break;\r\n        case \"线性渐变\":\r\n          const gnt = ctx.createLinearGradient(100, 100, 400, 100); //线性渐变\r\n          gnt.addColorStop(0, stopColor1);\r\n          gnt.addColorStop(1, stopColor2);\r\n          ctx.fillStyle = gnt;\r\n          ctx.fillRect(0, 0, 400, 400);\r\n          break;\r\n        case \"径向渐变\":\r\n          ctx.beginPath();\r\n          ctx.arc(100, 100, 100, 0, Math.PI * 2, true);\r\n          ctx.closePath();\r\n\r\n          const gen = ctx.createRadialGradient(120, 60, 10, 100, 100, 100);\r\n          gen.addColorStop(0, \"white\");\r\n          gen.addColorStop(1, \"orange\");\r\n          gen.addColorStop(0, \"rgba(0,0,0,0)\");\r\n          //填充\r\n          ctx.fillStyle = gen;\r\n          ctx.fill();\r\n          break;\r\n        case \"添加文本\":\r\n          const text = textInner;\r\n          ctx.font = \"20px bold\";\r\n          ctx.fillStyle = \"purple\";\r\n          ctx.fillText(text, 100, 100);\r\n          break;\r\n        case \"绘制图片\":\r\n          const image = new Image();\r\n          image.src = picurl;\r\n          image.onload = () => {\r\n            ctx.drawImage(image, 50, 50, 500, 260);\r\n          };\r\n          break;\r\n        case \"图片裁切\":\r\n          const image1 = new Image();\r\n          image1.src = picurl;\r\n          image1.onload = () => {\r\n            ctx.drawImage(image1, 200, 200, 200, 200, 100, 100, 250, 100);\r\n          };\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n    } else {\r\n      console.log(\"canvas-unsupportedCodeHere\");\r\n    }\r\n  };\r\n\r\n  const webglDraw = (type) => {\r\n    const v_shader = `\r\n    attribute vec2 position;\r\n\r\n    void main() {\r\n      gl_PointSize = 1.0;\r\n      gl_Position = vec4(position, 1.0, 1.0);\r\n    }\r\n    `;\r\n\r\n\r\n    const f_shader = `\r\n    precision mediump float;\r\n\r\n    void main()\r\n    {\r\n      gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    }    \r\n    `;\r\n    var canvas = document.getElementById(\"canvas\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    draw(state.btnType)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [opacity,\r\n    picurl,\r\n    offsetX,\r\n    offsetY,\r\n    blur,\r\n    shadowColor,\r\n    lineWidth,\r\n    fillStyle,\r\n    strokeStyle,\r\n    stopColor1,\r\n    stopColor2,\r\n    textInner,\r\n    lineCap,\r\n    setLineDash,\r\n    lineJoin,\r\n    drawType])\r\n\r\n  return (\r\n    <div className={styles.draw_btns_con}>\r\n      <div className={styles.draw_btns_title}>基于canvas绘制</div>\r\n      {canvasBtns.map((item) => {\r\n        return (\r\n          <div\r\n            className={styles.draw_btns_item}\r\n            key={item}\r\n            onClick={() => {\r\n              draw(item);\r\n            }}\r\n          >\r\n            {item}\r\n          </div>\r\n        );\r\n      })}\r\n      <div className={styles.draw_btns_title}>基于WebGL绘制</div>\r\n      {webglBtns.map((item) => {\r\n        return (\r\n          <div\r\n            className={styles.draw_btns_item}\r\n            key={item}\r\n            onClick={webglDraw()}\r\n          >\r\n            {item}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawBtns;\r\n","import { useContext } from \"react\";\r\nimport styles from \"./options.module.less\";\r\nimport Context from \"../../../../model/context\";\r\n\r\nfunction Options() {\r\n  const { dispatch } = useContext(Context);\r\n\r\n  const clearRect = () => {\r\n    var canvas = document.getElementById(\"canvas\");\r\n    if (canvas.getContext) {\r\n      var ctx = canvas.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  };\r\n\r\n  const onRangeChange = (e, type, drawType) => {\r\n    if (drawType) {\r\n      dispatch({ type: 'drawType', drawType: drawType});\r\n    }\r\n    dispatch({ type: type, changeValue: e.target.value, drawType});\r\n  };\r\n\r\n  const onBtnChange = (value, type) => {\r\n    dispatch({ type: type, changeValue: value });\r\n  }\r\n\r\n  return (\r\n    <div className={styles.options_con}>\r\n      <div className={styles.options_clear}>\r\n        <div className={styles.clear_btn} onClick={() => clearRect()}>\r\n          清空画布\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.options_range}>\r\n        <p className={styles.options_range_item}>\r\n          <span>透明度:</span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"1\"\r\n            step=\"0.1\"\r\n            onChange={(e) => {\r\n              onRangeChange(e, 'opacity');\r\n            }}\r\n          />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>阴影X偏移:</span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"30\"\r\n            step=\"0.1\"\r\n            defaultValue=\"0\"\r\n            onChange={(e) => {\r\n              onRangeChange(e, 'offsetX');\r\n            }}\r\n          />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>阴影Y偏移:</span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"30\"\r\n            step=\"0.1\"\r\n            defaultValue=\"0\"\r\n            onChange={(e) => {\r\n              onRangeChange(e, 'offsetY');\r\n            }}\r\n          />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>阴影模糊范围:</span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"30\"\r\n            step=\"0.1\"\r\n            defaultValue=\"0\"\r\n            onChange={(e) => {\r\n              onRangeChange(e, 'blur');\r\n            }}\r\n          />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>线宽:</span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"30\"\r\n            step=\"0.1\"\r\n            defaultValue=\"0\"\r\n            onChange={(e) => {\r\n              onRangeChange(e, 'lineWidth');\r\n            }}\r\n          />\r\n        </p>\r\n      </div>\r\n\r\n      <div className={styles.options_range}>\r\n        <p className={styles.options_range_item}>\r\n          <span>填充颜色:</span>\r\n          <input type=\"text\" placeholder=\"如:rgb(0,0,0)/#fff/white\" onBlur={(e) => {\r\n            onRangeChange(e, 'fillStyle', 'fill')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>描边颜色:</span>\r\n          <input type=\"text\" placeholder=\"如:rgb(0,0,0)/#fff/white\" onBlur={(e) => {\r\n            onRangeChange(e, 'strokeStyle', 'stroke')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>阴影颜色:</span>\r\n          <input type=\"text\" placeholder=\"如:rgb(0,0,0)/#fff/white\" onBlur={(e) => {\r\n            onRangeChange(e, 'shadowColor')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>渐变颜色1:</span>\r\n          <input type=\"text\" placeholder=\"如:rgb(0,0,0)/#fff/white\" onBlur={(e) => {\r\n            onRangeChange(e, 'stopColor1')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>渐变颜色2:</span>\r\n          <input type=\"text\" placeholder=\"如:rgb(0,0,0)/#fff/white\" onBlur={(e) => {\r\n            onRangeChange(e, 'stopColor2')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>文本内容:</span>\r\n          <input type=\"text\" onBlur={(e) => {\r\n            onRangeChange(e, 'textInner')\r\n          }} />\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>图片地址:</span>\r\n          <input type=\"text\" defaultValue=\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg3.doubanio.com%2Fview%2Fphoto%2Fl%2Fpublic%2Fp2460621164.jpg&refer=http%3A%2F%2Fimg3.doubanio.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1624254449&t=d397dfc100df7804add68a40573c165a\" onBlur={(e) => {\r\n            onRangeChange(e, 'picurl')\r\n          }} />\r\n        </p>\r\n      </div>\r\n\r\n      <div className={styles.options_range}>\r\n        <p className={styles.options_range_item}>\r\n          <span>线帽：</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('round','lineCap')}}>圆形</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('square','lineCap')}}>正方形</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('butt','lineCap')}}>默认</span>\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>线条连接样式：</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('round','lineJoin')}}>圆角</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('bevel','lineJoin')}}>斜角</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange('miter','lineJoin')}}>默认</span>\r\n        </p>\r\n        <p className={styles.options_range_item}>\r\n          <span>线形：</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange([5],'setLineDash')}}>虚线</span>\r\n          <span className={styles.options_lineCap} onClick={() => {onBtnChange([],'setLineDash')}}>实线</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Options;\r\n","import React from \"react\";\r\nimport styles from \"./palette.module.less\";\r\nimport DrawBtns from \"./components/drawBtns/drawBtns\";\r\nimport Options from \"./components/options/options\";\r\n\r\nfunction Palette() {\r\n  return (\r\n    <div className={styles.palette_con}>\r\n      <div className={styles.palette_left}>\r\n        <DrawBtns />\r\n      </div>\r\n      <div className={styles.palette_right}>\r\n        <div className={styles.palette_disposition}>\r\n          <Options />\r\n        </div>\r\n        <div className={styles.palette_canvas}>\r\n          <canvas id=\"canvas\" width=\"1200px\" height=\"350px\"></canvas>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Palette;\r\n","/*\n * @Author: shanzhilin\n * @Date: 2021-05-17 17:25:57\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2021-05-19 13:55:30\n * @Description:\n */\nimport styles from \"./App.module.less\";\nimport Palette from \"./pages/palette/palette.jsx\";\nimport { Provider } from \"./model/context\";\n\nfunction App() {\n  return (\n    <Provider>\n      <div className={styles.App}>\n        <Palette />\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","/*\n * @Author: shanzhilin\n * @Date: 2021-05-17 17:25:57\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2021-05-19 13:55:38\n * @Description: \n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}